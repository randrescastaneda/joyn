<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="joyn">
<title>Additional functions • joyn</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Additional functions">
<meta property="og:description" content="joyn">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary" data-bs-theme="dark"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">joyn</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.2.0.9007</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/main-functionalities.html">Main functionalities</a>
    <a class="dropdown-item" href="../articles/adv-functionalities.html">Advanced functionalities</a>
    <a class="dropdown-item" href="../articles/dplyr-joins.html">dplyr joins wrappers</a>
    <a class="dropdown-item" href="../articles/merge-wrapper.html">`data.table::merge()` wrapper</a>
    <a class="dropdown-item" href="../articles/messages.html">Messages</a>
    <a class="dropdown-item" href="../articles/aux-functions.html">Additional functions</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/randrescastaneda/joyn/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Additional functions</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/randrescastaneda/joyn/blob/HEAD/vignettes/aux-functions.Rmd" class="external-link"><code>vignettes/aux-functions.Rmd</code></a></small>
      <div class="d-none name"><code>aux-functions.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/randrescastaneda/joyn" class="external-link">joyn</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'joyn'</span></span>
<span><span class="co">#&gt; The following object is masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     merge</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com" class="external-link">data.table</a></span><span class="op">)</span></span></code></pre></div>
<p>This vignette will give you a brief overview of how you can use some
auxiliary functions that <code>joyn</code> makes available to the
user.</p>
<div class="section level2">
<h2 id="verifying-if-dt-is-uniquely-identified">Verifying if dt is uniquely identified<a class="anchor" aria-label="anchor" href="#verifying-if-dt-is-uniquely-identified"></a>
</h2>
<p>One of the advantages of <code>joyn</code> is that you can perform
one-to-one (1:1), one-to-many (1:m), many-to-one (m:1), and many-to-many
(m:m) joins. <code><a href="../reference/is_id.html">is_id()</a></code> is a function that might come in handy
when you want to check whether your data table is uniquely identified by
the variables you want to merge by. In fact this is what
<code><a href="../reference/is_id.html">is_id()</a></code> checks by default, returning either TRUE or FALSE
depending on whether the data table is uniquely identified or not.
Alternatively, you can set <code>return_report = FALSE</code> to get a
summary of the duplicates.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">x1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1L</span>, <span class="fl">1L</span>, <span class="fl">2L</span>, <span class="fl">3L</span>, <span class="cn">NA_integer_</span><span class="op">)</span>,</span>
<span>                 t  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1L</span>, <span class="fl">2L</span>, <span class="fl">1L</span>, <span class="fl">2L</span>, <span class="cn">NA_integer_</span><span class="op">)</span>,</span>
<span>                 x  <span class="op">=</span> <span class="fl">11</span><span class="op">:</span><span class="fl">15</span>,</span>
<span>                 c  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"a"</span>, <span class="st">"t"</span>, <span class="st">"d"</span><span class="op">)</span>,</span>
<span>                 c1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"h"</span>, <span class="st">"j"</span>, <span class="st">"k"</span>, <span class="st">"l"</span>, <span class="st">"y"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">y1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>, <span class="fl">4</span><span class="op">)</span>,</span>
<span>                 y  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">11L</span>, <span class="fl">15L</span>, <span class="fl">16</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Checking if x1 is uniquely identified by "id" with return_report = TRUE</span></span>
<span></span>
<span><span class="fu"><a href="../reference/is_id.html">is_id</a></span><span class="op">(</span>dt <span class="op">=</span> <span class="va">x1</span>, </span>
<span>      by <span class="op">=</span> <span class="st">"id"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Duplicates in terms of `id`</span></span>
<span><span class="co">#&gt;   copies n percent</span></span>
<span><span class="co">#&gt; 1      1 3     75%</span></span>
<span><span class="co">#&gt; 2      2 1     25%</span></span>
<span><span class="co">#&gt; 3  total 4    100%</span></span>
<span><span class="co">#&gt; ─────────────────────────────────────────────────────── End of <span style="color: #00BB00;">is_id()</span> report ──</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Checking duplicates in x1 with return_report = FALSE</span></span>
<span></span>
<span><span class="fu"><a href="../reference/is_id.html">is_id</a></span><span class="op">(</span>dt <span class="op">=</span> <span class="va">x1</span>, </span>
<span>      by <span class="op">=</span> <span class="st">"id"</span>, </span>
<span>      return_report <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Duplicates in terms of `id`</span></span>
<span><span class="co">#&gt;   copies n percent</span></span>
<span><span class="co">#&gt; 1      1 3     75%</span></span>
<span><span class="co">#&gt; 2      2 1     25%</span></span>
<span><span class="co">#&gt; 3  total 4    100%</span></span>
<span><span class="co">#&gt; ─────────────────────────────────────────────────────── End of <span style="color: #00BB00;">is_id()</span> report ──</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="possible-unique-identifiers">Possible unique identifiers<a class="anchor" aria-label="anchor" href="#possible-unique-identifiers"></a>
</h2>
<p>In <code>joyn</code>, you can also search for variables which
possibly uniquely identify your data table <code>x</code> using the
<code><a href="../reference/possible_ids.html">possible_ids()</a></code> function. For example,</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Identify possible unique identifier excluding variable t</span></span>
<span><span class="fu"><a href="../reference/possible_ids.html">possible_ids</a></span><span class="op">(</span>dt      <span class="op">=</span> <span class="va">x1</span>, </span>
<span>             exclude <span class="op">=</span> <span class="st">"t"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> There are no duplicates in data frame</span></span>
<span><span class="co">#&gt; → we found 2 possible ids</span></span>
<span><span class="co">#&gt; $V1</span></span>
<span><span class="co">#&gt; [1] "x"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $V2</span></span>
<span><span class="co">#&gt; [1] "c1"</span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Identify possible unique identifier excluding character variables</span></span>
<span><span class="fu"><a href="../reference/possible_ids.html">possible_ids</a></span><span class="op">(</span>dt      <span class="op">=</span> <span class="va">x1</span>, </span>
<span>             exclude <span class="op">=</span> <span class="st">"_character"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> There are no duplicates in data frame</span></span>
<span><span class="co">#&gt; → we found 1 possible id</span></span>
<span><span class="co">#&gt; $V1</span></span>
<span><span class="co">#&gt; [1] "x"</span></span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Identify possible unique identifiers, excluding character variables but considering variable z</span></span>
<span><span class="fu"><a href="../reference/possible_ids.html">possible_ids</a></span><span class="op">(</span>dt      <span class="op">=</span> <span class="va">x1</span>, </span>
<span>             exclude <span class="op">=</span> <span class="st">"_character"</span>,</span>
<span>             include <span class="op">=</span> <span class="st">"z"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> There are no duplicates in data frame</span></span>
<span><span class="co">#&gt; → we found 1 possible id</span></span>
<span><span class="co">#&gt; $V1</span></span>
<span><span class="co">#&gt; [1] "x"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="verifying-if-data-table-is-balanced">Verifying if data table is balanced<a class="anchor" aria-label="anchor" href="#verifying-if-data-table-is-balanced"></a>
</h2>
<p>Additionally, <code>joyn</code> makes available to the user the
<code><a href="../reference/is_balanced.html">is_balanced()</a></code> function. This is instrumental in assessing
the completeness of the data table within a specified group, i.e., if
the table contains all the combinations of observations in the group. By
default, <code><a href="../reference/is_balanced.html">is_balanced()</a></code> will tell you if/if not the table is
balanced. However, if you set <code>return = "table"</code>, you will
get a summary of the unbalanced observations. In other words, those
combinations of elements between the specified variables that is not
contained in the input table.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Example with return = "logic", the default</span></span>
<span></span>
<span><span class="fu"><a href="../reference/is_balanced.html">is_balanced</a></span><span class="op">(</span>df <span class="op">=</span> <span class="va">x1</span>,</span>
<span>            by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"id"</span>, <span class="st">"t"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Example with return = "table"</span></span>
<span><span class="fu"><a href="../reference/is_balanced.html">is_balanced</a></span><span class="op">(</span>df <span class="op">=</span> <span class="va">x1</span>,</span>
<span>            by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"id"</span>, <span class="st">"t"</span><span class="op">)</span>, </span>
<span>            return <span class="op">=</span> <span class="st">"table"</span><span class="op">)</span></span>
<span><span class="co">#&gt;   id t</span></span>
<span><span class="co">#&gt; 1  3 1</span></span>
<span><span class="co">#&gt; 2  2 2</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="tabulating-simple-frequencies">Tabulating simple frequencies<a class="anchor" aria-label="anchor" href="#tabulating-simple-frequencies"></a>
</h2>
<p>Furthermore, <code>joyn</code> provides a function that generates
simple frequency tables, so that you can easily have an overview of the
distribution of values within your data tables.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Tabulating frequencies of var `id`</span></span>
<span></span>
<span><span class="fu"><a href="../reference/freq_table.html">freq_table</a></span><span class="op">(</span>x     <span class="op">=</span> <span class="va">x1</span>, </span>
<span>           byvar <span class="op">=</span> <span class="st">"id"</span><span class="op">)</span><span class="op">[</span><span class="op">]</span></span>
<span><span class="co">#&gt;      id n percent</span></span>
<span><span class="co">#&gt; 1     1 2     40%</span></span>
<span><span class="co">#&gt; 2     2 1     20%</span></span>
<span><span class="co">#&gt; 3     3 1     20%</span></span>
<span><span class="co">#&gt; 4  &lt;NA&gt; 1     20%</span></span>
<span><span class="co">#&gt; 5 total 5    100%</span></span></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Removing NAs from the calculation</span></span>
<span></span>
<span><span class="fu"><a href="../reference/freq_table.html">freq_table</a></span><span class="op">(</span>x     <span class="op">=</span> <span class="va">x1</span>, </span>
<span>           byvar <span class="op">=</span> <span class="st">"id"</span>, </span>
<span>           na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">[</span><span class="op">]</span></span>
<span><span class="co">#&gt;      id n percent</span></span>
<span><span class="co">#&gt; 1     1 2     50%</span></span>
<span><span class="co">#&gt; 2     2 1     25%</span></span>
<span><span class="co">#&gt; 3     3 1     25%</span></span>
<span><span class="co">#&gt; 4 total 4    100%</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://randrescastaneda.rbind.io/" class="external-link">R.Andres Castaneda</a>, Zander Prinsloo, Rossana Tatulli.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
