<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="This is the primary function in the joyn package. It executes a full join,
performs a number of checks, and filters to allow the user-specified join."><title>Join two tables — joyn • joyn</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Join two tables — joyn"><meta property="og:description" content="This is the primary function in the joyn package. It executes a full join,
performs a number of checks, and filters to allow the user-specified join."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">joyn</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.2.3</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/main-functionalities.html">Main functionalities</a>
    <a class="dropdown-item" href="../articles/adv-functionalities.html">Advanced functionalities</a>
    <a class="dropdown-item" href="../articles/dplyr-joins.html">dplyr joins wrappers</a>
    <a class="dropdown-item" href="../articles/merge-wrapper.html">`data.table::merge()` wrapper</a>
    <a class="dropdown-item" href="../articles/messages.html">Messages</a>
    <a class="dropdown-item" href="../articles/aux-functions.html">Additional functions</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/randrescastaneda/joyn/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Join two tables</h1>
      <small class="dont-index">Source: <a href="https://github.com/randrescastaneda/joyn/blob/HEAD/R/joyn-merge.R" class="external-link"><code>R/joyn-merge.R</code></a></small>
      <div class="d-none name"><code>joyn.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This is the primary function in the <code>joyn</code> package. It executes a full join,
performs a number of checks, and filters to allow the user-specified join.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">joyn</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">y</span>,</span>
<span>  by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sets.html" class="external-link">intersect</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  match_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1:1"</span>, <span class="st">"1:m"</span>, <span class="st">"m:1"</span>, <span class="st">"m:m"</span><span class="op">)</span>,</span>
<span>  keep <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"full"</span>, <span class="st">"left"</span>, <span class="st">"master"</span>, <span class="st">"right"</span>, <span class="st">"using"</span>, <span class="st">"inner"</span>, <span class="st">"anti"</span><span class="op">)</span>,</span>
<span>  y_vars_to_keep <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">keep</span> <span class="op">==</span> <span class="st">"anti"</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  update_values <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  update_NAs <span class="op">=</span> <span class="va">update_values</span>,</span>
<span>  reportvar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"joyn.reportvar"</span><span class="op">)</span>,</span>
<span>  reporttype <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"factor"</span>, <span class="st">"character"</span>, <span class="st">"numeric"</span><span class="op">)</span>,</span>
<span>  roll <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  keep_common_vars <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  sort <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"joyn.verbose"</span><span class="op">)</span>,</span>
<span>  suffixes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"joyn.suffixes"</span><span class="op">)</span>,</span>
<span>  allow.cartesian <span class="op">=</span> <span class="fu">deprecated</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  yvars <span class="op">=</span> <span class="fu">deprecated</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  keep_y_in_x <span class="op">=</span> <span class="fu">deprecated</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  na.last <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"joyn.na.last"</span><span class="op">)</span>,</span>
<span>  msg_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"joyn.msg_type"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>x</dt>
<dd><p>data frame: referred to as <em>left</em> in R terminology, or <em>master</em> in
Stata terminology.</p></dd>


<dt>y</dt>
<dd><p>data frame: referred to as <em>right</em> in R terminology, or <em>using</em> in
Stata terminology.</p></dd>


<dt>by</dt>
<dd><p>a character vector of variables to join by. If NULL, the default,
joyn will do a natural join, using all variables with common names across
the two tables. A message lists the variables so that you can check they're
correct (to suppress the message, simply explicitly list the variables that
you want to join). To join by different variables on x and y use a vector
of expressions. For example, <code>by = c("a = b", "z")</code> will use "a" in <code>x</code>,
"b" in <code>y</code>, and "z" in both tables.</p></dd>


<dt>match_type</dt>
<dd><p>character: one of <em>"m:m"</em>, <em>"m:1"</em>, <em>"1:m"</em>, <em>"1:1"</em>.
Default is <em>"1:1"</em> since this the most restrictive. However, following
Stata's recommendation, it is better to be explicit and use any of the
other three match types (See details in <em>match types sections</em>).</p></dd>


<dt>keep</dt>
<dd><p>atomic character vector of length 1: One of <em>"full"</em>, <em>"left"</em>,
<em>"master"</em>, <em>"right"</em>,
<em>"using"</em>, <em>"inner"</em>. Default is <em>"full"</em>. Even though this is not the
regular behavior of joins in R, the objective of <code>joyn</code> is to present a
diagnosis of the join which requires a full join. That is why the default
is a a full join. Yet, if <em>"left"</em> or <em>"master"</em>, it keeps the observations
that matched in both tables and the ones that did not match in x. The ones
in y will be discarded. If <em>"right"</em> or <em>"using"</em>, it keeps the
observations that matched in both tables and the ones that did not match in
y. The ones in x will be discarded. If <em>"inner"</em>, it only keeps the
observations that matched both tables. Note that if, for example, a <code>keep = "left", the </code>joyn()<code>function still executes a full join under the hood and then filters so that only rows the output table is a left join. This behaviour, while inefficient, allows all the diagnostics and checks conducted by</code>joyn`.</p></dd>


<dt>y_vars_to_keep</dt>
<dd><p>character: Vector of variable names in <code>y</code> that will be
kept after the merge. If TRUE (the default), it keeps all the brings all
the variables in y into x. If FALSE or NULL, it does not bring any variable
into x, but a report will be generated.</p></dd>


<dt>update_values</dt>
<dd><p>logical: If TRUE, it will update all values of variables
in x with the actual of variables in y with the same name as the ones in x.
<strong>NAs from y won't be used to update actual values in x</strong>. Yet, by default,
NAs in x will be updated with values in y. To avoid this, make sure to set
<code>update_NAs = FALSE</code></p></dd>


<dt>update_NAs</dt>
<dd><p>logical: If TRUE, it will update NA values of all variables
in x with actual values of variables in y that have the same name as the
ones in x. If FALSE, NA values won't be updated, even if <code>update_values</code> is
<code>TRUE</code></p></dd>


<dt>reportvar</dt>
<dd><p>character: Name of reporting variable. Default is ".joyn".
This is the same as variable "_merge" in Stata after performing a merge. If
FALSE or NULL, the reporting variable will be excluded from the final
table, though a summary of the join will be display after concluding.</p></dd>


<dt>reporttype</dt>
<dd><p>character: One of <em>"character"</em> or <em>"numeric"</em>. Default is
<em>"character"</em>. If <em>"numeric"</em>, the reporting variable will contain  numeric
codes of the source and the contents of each observation in the joined
table. See below for more information.</p></dd>


<dt>roll</dt>
<dd><p>double: <em>to be implemented</em></p></dd>


<dt>keep_common_vars</dt>
<dd><p>logical: If TRUE, it will keep the original variable
from y when both tables have common variable names. Thus, the prefix "y."
will be added to the original name to distinguish from the resulting
variable in the joined table.</p></dd>


<dt>sort</dt>
<dd><p>logical: If TRUE, sort by key variables in <code>by</code>. Default is
FALSE.</p></dd>


<dt>verbose</dt>
<dd><p>logical: if FALSE, it won't display any message (programmer's
option). Default is TRUE.</p></dd>


<dt>suffixes</dt>
<dd><p>A character(2) specifying the suffixes to be used for making
non-by column names unique. The suffix behaviour works in a similar fashion
as the <a href="https://rdrr.io/r/base/merge.html" class="external-link">base::merge</a> method does.</p></dd>


<dt>allow.cartesian</dt>
<dd><p>logical: Check documentation in official <a href="https://rdatatable.gitlab.io/data.table/reference/merge.html/" class="external-link">web site</a>.
Default is <code>NULL</code>, which implies that if the join is "1:1" it will be
<code>FALSE</code>, but if the join has any "m" on it, it will be converted to <code>TRUE</code>.
By specifying <code>TRUE</code> of <code>FALSE</code> you force the behavior of the join.</p></dd>


<dt>yvars</dt>
<dd><p><a href="https://lifecycle.r-lib.org/articles/stages.html#superseded" class="external-link"><img src="figures/lifecycle-superseded.svg" alt="[Superseded]"></a>: use now <code>y_vars_to_keep</code></p></dd>


<dt>keep_y_in_x</dt>
<dd><p><a href="https://lifecycle.r-lib.org/articles/stages.html#superseded" class="external-link"><img src="figures/lifecycle-superseded.svg" alt="[Superseded]"></a>: use now
<code>keep_common_vars</code></p></dd>


<dt>na.last</dt>
<dd><p><code>logical</code>. If <code>TRUE</code>, missing values in the data are placed last; if <code>FALSE</code>, they are placed first; if <code>NA</code> they are removed.
<code>na.last=NA</code> is valid only for <code>x[order(., na.last)]</code> and its
default is <code>TRUE</code>. <code>setorder</code> and <code>setorderv</code> only accept
<code>TRUE</code>/<code>FALSE</code> with default <code>FALSE</code>.</p></dd>


<dt>msg_type</dt>
<dd><p>character: type of messages to display by default</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>a data.table joining x and y.</p>
    </div>
    <div class="section level2">
    <h2 id="match-types">match types<a class="anchor" aria-label="anchor" href="#match-types"></a></h2>
    


<p>Using the same wording of the <a href="https://www.stata.com/manuals/dmerge.pdf" class="external-link">Stata manual</a></p>
<p><strong>1:1</strong>: specifies a one-to-one match merge. The variables specified in
<code>by</code>  uniquely identify single observations in both table.</p>
<p><strong>1:m and m:1</strong>: specify <em>one-to-many</em> and <em>many-to-one</em> match merges,
respectively. This means that in of the tables the observations are
uniquely identify by the variables in <code>by</code>, while in the other table many
(two or more)  of the observations are identify by the variables in <code>by</code></p>
<p><strong>m:m</strong> refers to <em>many-to-many merge</em>. variables in <code>by</code> does not uniquely
identify the observations in either table. Matching is performed by
combining observations with equal values in <code>by</code>; within matching values,
the first observation in the master (i.e. left or x) table is matched with
the first matching observation in the using (i.e. right or y) table; the
second, with the second; and so on. If there is an unequal number of
observations within a group, then the last observation of the shorter group
is used repeatedly to match with subsequent observations of the longer
group.</p>
    </div>
    <div class="section level2">
    <h2 id="reporttype">reporttype<a class="anchor" aria-label="anchor" href="#reporttype"></a></h2>
    


<p>If <code>reporttype = "numeric"</code>, then the numeric values have the following
meaning:</p>
<p>1: row comes from <code>x</code>, i.e. "x" 2: row comes from <code>y</code>, i.e. "y" 3: row from
both <code>x</code> and <code>y</code>, i.e. "x &amp; y" 4: row has NA in <code>x</code> that has been updated
with <code>y</code>, i.e. "NA updated" 5: row has valued in <code>x</code> that has been updated
with <code>y</code>, i.e. "value updated" 6: row from <code>x</code> that has not been updated,
i.e. "not updated"</p>
    </div>
    <div class="section level2">
    <h2 id="nas-order">NAs order<a class="anchor" aria-label="anchor" href="#nas-order"></a></h2>
    <p><code>NA</code>s are placed either at first or at last in the
resulting data.frame depending on the value of <code>getOption("joyn.na.last")</code>.
The Default is <code>FALSE</code> as it is the default value of
<a href="https://rdrr.io/pkg/data.table/man/setorder.html" class="external-link">data.table::setorderv</a>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Simple join</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com" class="external-link">data.table</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">x1</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/data.table/man/data.table.html" class="external-link">data.table</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1L</span>, <span class="fl">1L</span>, <span class="fl">2L</span>, <span class="fl">3L</span>, <span class="cn">NA_integer_</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>t  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1L</span>, <span class="fl">2L</span>, <span class="fl">1L</span>, <span class="fl">2L</span>, <span class="cn">NA_integer_</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>x  <span class="op">=</span> <span class="fl">11</span><span class="op">:</span><span class="fl">15</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">y1</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/data.table/man/data.table.html" class="external-link">data.table</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>,</span></span>
<span class="r-in"><span>                y  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">11L</span>, <span class="fl">15L</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">x2</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/data.table/man/data.table.html" class="external-link">data.table</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="cn">NA</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                t  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1L</span>, <span class="fl">2L</span>, <span class="fl">1L</span>, <span class="fl">2L</span>, <span class="cn">NA_integer_</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                x  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">16</span>, <span class="fl">12</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="fl">15</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">y2</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/data.table/man/data.table.html" class="external-link">data.table</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">5</span>, <span class="fl">6</span>, <span class="fl">3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>              yd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">5</span>, <span class="fl">6</span>, <span class="fl">3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>              y  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">11L</span>, <span class="fl">15L</span>, <span class="fl">20L</span>, <span class="fl">13L</span>, <span class="fl">10L</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>              x  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">16</span><span class="op">:</span><span class="fl">20</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">joyn</span><span class="op">(</span><span class="va">x1</span>, <span class="va">y1</span>, match_type <span class="op">=</span> <span class="st">"m:1"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ── <span style="font-weight: bold;">JOYn Report</span> ──</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .joyn n percent</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     x 2     40%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 x &amp; y 3     60%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 total 5    100%</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ────────────────────────────────────────────────────────── End of <span style="color: #00BB00;">JOYn</span> report ──</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00AF00;">ℹ Note: </span><span style="color: #9E9E9E;">Joyn's report available in variable .joyn</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00AF00;">ℹ Note: </span><span style="color: #9E9E9E;">Removing key variables id from id and y</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       id     t     x     y  .joyn</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;fctr&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:     1     1    11    11  x &amp; y</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:     1     2    12    11  x &amp; y</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:     2     1    13    15  x &amp; y</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:     3     2    14    NA      x</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5:    NA    NA    15    NA      x</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Bad merge for not specifying by argument or match_type</span></span></span>
<span class="r-in"><span><span class="fu">joyn</span><span class="op">(</span><span class="va">x2</span>, <span class="va">y2</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ── <span style="font-weight: bold;">JOYn Report</span> ──</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .joyn n percent</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     x 4   44.4%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     y 4   44.4%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 x &amp; y 1   11.1%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 total 9    100%</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ────────────────────────────────────────────────────────── End of <span style="color: #00BB00;">JOYn</span> report ──</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00AF00;">ℹ Note: </span><span style="color: #9E9E9E;">Joyn's report available in variable .joyn</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00AF00;">ℹ Note: </span><span style="color: #9E9E9E;">Removing key variables id and x from id, yd, y, and x</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       id     t     x    yd     y  .joyn</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    &lt;num&gt; &lt;int&gt; &lt;num&gt; &lt;num&gt; &lt;int&gt; &lt;fctr&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:     1     1    16     1    11  x &amp; y</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:     1     2    12    NA    NA      x</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:     2     1    NA    NA    NA      x</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:     3     2    NA    NA    NA      x</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5:    NA    NA    15    NA    NA      x</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6:     2    NA    17     2    15      y</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7:     5    NA    18     5    20      y</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8:     6    NA    19     6    13      y</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9:     3    NA    20     3    10      y</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># good merge, ignoring variable x from y</span></span></span>
<span class="r-in"><span><span class="fu">joyn</span><span class="op">(</span><span class="va">x2</span>, <span class="va">y2</span>, by <span class="op">=</span> <span class="st">"id"</span>, match_type <span class="op">=</span> <span class="st">"m:1"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ── <span style="font-weight: bold;">JOYn Report</span> ──</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .joyn n percent</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     x 1   14.3%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     y 2   28.6%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 x &amp; y 4   57.1%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 total 7    100%</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ────────────────────────────────────────────────────────── End of <span style="color: #00BB00;">JOYn</span> report ──</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00AF00;">ℹ Note: </span><span style="color: #9E9E9E;">Joyn's report available in variable .joyn</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00AF00;">ℹ Note: </span><span style="color: #9E9E9E;">Removing key variables id from id, yd, y, and x</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       id     t     x    yd     y  .joyn</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    &lt;num&gt; &lt;int&gt; &lt;num&gt; &lt;num&gt; &lt;int&gt; &lt;fctr&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:     1     1    16     1    11  x &amp; y</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:     1     2    12     1    11  x &amp; y</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:     2     1    NA     2    15  x &amp; y</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:     3     2    NA     3    10  x &amp; y</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5:    NA    NA    15    NA    NA      x</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6:     5    NA    NA     5    20      y</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7:     6    NA    NA     6    13      y</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># update NAs in x variable form x</span></span></span>
<span class="r-in"><span><span class="fu">joyn</span><span class="op">(</span><span class="va">x2</span>, <span class="va">y2</span>, by <span class="op">=</span> <span class="st">"id"</span>, update_NAs <span class="op">=</span> <span class="cn">TRUE</span>, match_type <span class="op">=</span> <span class="st">"m:1"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ── <span style="font-weight: bold;">JOYn Report</span> ──</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        .joyn n percent</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1          x 1   14.3%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      x &amp; y 2   28.6%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 NA updated 4   57.1%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      total 7    100%</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ────────────────────────────────────────────────────────── End of <span style="color: #00BB00;">JOYn</span> report ──</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00AF00;">ℹ Note: </span><span style="color: #9E9E9E;">Joyn's report available in variable .joyn</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00AF00;">ℹ Note: </span><span style="color: #9E9E9E;">Removing key variables id from id, yd, y, and x</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       id     t     x    yd     y      .joyn</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    &lt;num&gt; &lt;int&gt; &lt;num&gt; &lt;num&gt; &lt;int&gt;     &lt;fctr&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:     1     1    16     1    11      x &amp; y</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:     1     2    12     1    11      x &amp; y</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:     2     1    17     2    15 NA updated</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:     3     2    20     3    10 NA updated</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5:    NA    NA    15    NA    NA          x</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6:     5    NA    18     5    20 NA updated</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7:     6    NA    19     6    13 NA updated</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Update values in x with variables from y</span></span></span>
<span class="r-in"><span><span class="fu">joyn</span><span class="op">(</span><span class="va">x2</span>, <span class="va">y2</span>, by <span class="op">=</span> <span class="st">"id"</span>, update_values <span class="op">=</span> <span class="cn">TRUE</span>, match_type <span class="op">=</span> <span class="st">"m:1"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ── <span style="font-weight: bold;">JOYn Report</span> ──</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           .joyn n percent</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    NA updated 4   57.1%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 value updated 2   28.6%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   not updated 1   14.3%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4         total 7    100%</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ────────────────────────────────────────────────────────── End of <span style="color: #00BB00;">JOYn</span> report ──</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00AF00;">ℹ Note: </span><span style="color: #9E9E9E;">Joyn's report available in variable .joyn</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00AF00;">ℹ Note: </span><span style="color: #9E9E9E;">Removing key variables id from id, yd, y, and x</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       id     t     x    yd     y         .joyn</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    &lt;num&gt; &lt;int&gt; &lt;num&gt; &lt;num&gt; &lt;int&gt;        &lt;fctr&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:     1     1    16     1    11 value updated</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:     1     2    16     1    11 value updated</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:     2     1    17     2    15    NA updated</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:     3     2    20     3    10    NA updated</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5:    NA    NA    15    NA    NA   not updated</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6:     5    NA    18     5    20    NA updated</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7:     6    NA    19     6    13    NA updated</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by <a href="https://randrescastaneda.rbind.io/" class="external-link">R.Andres Castaneda</a>, Zander Prinsloo, Rossana Tatulli.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

